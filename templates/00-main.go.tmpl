// Automatically generated by Gohm. Please do not edit!

package gohm

import (
	"context"
	"fmt"
	"reflect"
	"strconv"
	"strings"

	"github.com/go-redis/redis/v8"
	"github.com/google/uuid"

	{{ range .Packages -}}
	{{ .Name }} "{{ .PkgPath }}"
	{{ end }}
)

// GohmClient embeds the redis.Client type from go-redis/redis, and adds
// models as the other fields.
type GohmClient struct {
	*redis.Client

	{{ range .Models -}}
	{{ .Name.Name }} *{{ .Name.Name }}
	{{ end -}}
}

// NewClient works just like redis.NewClient, except it returns a GohmClient type.
func NewClient(opt *redis.Options) *GohmClient {
	redisClient := redis.NewClient(opt)

	gohmClient := &GohmClient{
		redisClient,
		{{ range .Models -}}
		&{{ .Name.Name }}{rdb: redisClient},
		{{ end -}}
		}
	
	return gohmClient
}

{{ range .Models -}}

{{ $model := .Name.Name -}}

type {{ $model }} struct {
	rdb *redis.Client
}

{{ template "save" . }}

{{ template "find-many" . }}

{{ template "03-stringify.go.tmpl" . }}

{{ template "04-option-helpers.go.tmpl" . }}

{{ end -}}

{{ template "05-generic-helpers.go.tmpl" }}